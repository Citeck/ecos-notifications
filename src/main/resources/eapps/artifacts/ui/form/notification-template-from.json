{
  "id": "notification-template",
  "formKey": "notification-template",
  "title": {
    "en": "Notification template"
  },
  "description": {
    "en": ""
  },
  "customModule": null,
  "typeRef": "",
  "width": "default",
  "i18n": {},
  "definition": {
    "components": [
      {
        "label": "Id",
        "defaultValue": "",
        "validate": {
          "required": true,
          "pattern": "^[a-zA-Z0-9-*]+$"
        },
        "key": "moduleId",
        "type": "textfield",
        "input": true
      },
      {
        "label": "Name",
        "defaultValue": "",
        "validate": {
          "required": true
        },
        "key": "name",
        "type": "textfield",
        "input": true
      },
      {
        "label": "Notification Title",
        "defaultValue": {
          "ru": "",
          "en": ""
        },
        "key": "notificationTitle",
        "type": "mlText",
        "input": true
      },
      {
        "label": "Template content",
        "multiple": true,
        "storage": "base64",
        "key": "templateContent",
        "validate": {
          "required": true
        },
        "type": "file",
        "input": true,
        "reorder": false,
        "logic": [
          {
            "name": "updateRequirement",
            "trigger": {
              "type": "javascript",
              "javascript": "const multiTemplateConfig = _.get(data, 'multiTemplateConfig');\r\n\r\nresult = (multiTemplateConfig || [])\r\n  .some(item => !_.isEmpty(_.get(item, 'template')));"
            },
            "actions": [
              {
                "name": "setRequired",
                "type": "property",
                "property": {
                  "label": "Required",
                  "value": "validate.required",
                  "type": "boolean"
                },
                "state": "false"
              }
            ]
          }
        ]
      },
      {
        "label": "Model",
        "disableInlineEdit": true,
        "keyLabel": "",
        "key": "model",
        "type": "datamap",
        "input": true,
        "valueComponent": {
          "type": "textfield",
          "key": "value",
          "label": "Value",
          "defaultValue": "Value",
          "input": true,
          "conditional": {
            "show": null,
            "when": null,
            "eq": "",
            "json": ""
          }
        }
      },
      {
        "label": "Multi templates",
        "disableAddingRemovingRows": false,
        "addAnother": "",
        "addAnotherPosition": "bottom",
        "removePlacement": "col",
        "defaultOpen": false,
        "layoutFixed": false,
        "enableRowGroups": false,
        "multiple": true,
        "reorder": false,
        "defaultValue": [
          {
            "textField": "",
            "templateRef": "",
            "pattern": "",
            "template": "",
            "type": "",
            "selectJournal": "",
            "textArea": "",
            "condition": ""
          }
        ],
        "validate": {
          "required": true,
          "minLength": "",
          "maxLength": ""
        },
        "key": "multiTemplateConfig",
        "logic": [
          {
            "name": "updateRequirement",
            "trigger": {
              "type": "javascript",
              "javascript": "const {templateContent} = data || {};\r\nresult = !!templateContent.length \r\n  || Object.keys(templateContent).length!==0;"
            },
            "actions": [
              {
                "name": "setRequired",
                "type": "property",
                "property": {
                  "label": "Required",
                  "value": "validate.required",
                  "type": "boolean"
                },
                "state": "false"
              }
            ]
          }
        ],
        "type": "datagrid",
        "input": true,
        "components": [
          {
            "key": "panel",
            "type": "panel",
            "input": false,
            "components": [
              {
                "hideLabel": true,
                "columns": [
                  {
                    "components": [
                      {
                        "label": "Template",
                        "hideCreateButton": true,
                        "hideEditRowButton": true,
                        "hideDeleteRowButton": true,
                        "journalId": "notification-templates",
                        "key": "template",
                        "type": "selectJournal",
                        "input": true
                      }
                    ],
                    "type": "column",
                    "input": false,
                    "key": "column",
                    "label": "Column",
                    "index": 0,
                    "clearOnHide": true,
                    "conditional": {
                      "show": null,
                      "when": null
                    }
                  },
                  {
                    "index": 1,
                    "type": "column",
                    "input": false,
                    "key": "column",
                    "label": "Column",
                    "components": [
                      {
                        "label": "Type",
                        "hideCreateButton": true,
                        "hideEditRowButton": true,
                        "hideDeleteRowButton": true,
                        "journalId": "ecos-types",
                        "key": "type",
                        "type": "selectJournal",
                        "input": true
                      }
                    ],
                    "clearOnHide": true,
                    "conditional": {
                      "show": null,
                      "when": null
                    }
                  },
                  {
                    "md": 12,
                    "type": "column",
                    "input": false,
                    "key": "column",
                    "index": 2,
                    "components": [
                      {
                        "title": "Predicate ",
                        "collapsible": true,
                        "key": "panel2",
                        "type": "panel",
                        "input": false,
                        "components": [
                          {
                            "label": "Predicate condition",
                            "editor": "ace",
                            "wysiwyg": {
                              "theme": "snow",
                              "placeholder": "",
                              "modules": {
                                "clipboard": {
                                  "matchVisual": false
                                },
                                "toolbar": [
                                  [
                                    {
                                      "size": [
                                        "small",
                                        false,
                                        "large",
                                        "huge"
                                      ]
                                    }
                                  ],
                                  [
                                    {
                                      "header": [
                                        1,
                                        2,
                                        3,
                                        4,
                                        5,
                                        6,
                                        false
                                      ]
                                    }
                                  ],
                                  [
                                    {
                                      "font": []
                                    }
                                  ],
                                  [
                                    "bold",
                                    "italic",
                                    "underline",
                                    "strike",
                                    {
                                      "script": "sub"
                                    },
                                    {
                                      "script": "super"
                                    },
                                    "clean"
                                  ],
                                  [
                                    {
                                      "color": []
                                    },
                                    {
                                      "background": []
                                    }
                                  ],
                                  [
                                    {
                                      "list": "ordered"
                                    },
                                    {
                                      "list": "bullet"
                                    },
                                    {
                                      "indent": "-1"
                                    },
                                    {
                                      "indent": "+1"
                                    },
                                    {
                                      "align": []
                                    }
                                  ],
                                  [
                                    "blockquote",
                                    "code-block"
                                  ],
                                  [
                                    "link",
                                    "image",
                                    "video",
                                    "formula",
                                    "source"
                                  ]
                                ]
                              }
                            },
                            "clearOnHide": false,
                            "defaultValue": "",
                            "key": "condition",
                            "as": "",
                            "type": "textarea",
                            "input": true
                          }
                        ],
                        "collapsed": true
                      }
                    ]
                  }
                ],
                "key": "columns",
                "type": "columns",
                "input": false
              }
            ],
            "row": "0-0"
          }
        ]
      },
      {
        "type": "button",
        "key": "submit",
        "disableOnInvalid": true,
        "theme": "primary",
        "input": true,
        "conditional": {
          "show": null,
          "when": null
        }
      }
    ]
  },
  "attributes": {}
}
